{% extends "base.html" %}
{% load static %}
{% block title %}Create a team{% endblock %}
{% block body_class %}team-create-page{% endblock %}
{% block extra_css %}
{{ block.super }}
<style>
  body.team-create-page:before{
    min-height:100vh;
    --teams-bg: url("{% static 'img/bg/teams_bg.jpg' %}");
    background:
      radial-gradient(1200px 260px at 95% -40%, rgba(245,158,11,.25) 0, rgba(245,158,11,0) 65%),
      linear-gradient(180deg, rgba(22,29,47,.24), rgba(13,20,35,.24)),
      var(--teams-bg) center/cover fixed no-repeat;
  }
  .form-wrap{
    min-height: calc(100vh - 64px);
    display:flex; justify-content:center; align-items:flex-start;
    padding: 6rem 1rem 3rem;
  }
  .form-card{ max-width: 720px; width:100%; }
  .form-card .card-body{ padding: 2.75rem 3rem; }
  @media (min-width:768px){ .form-card .card-body{ padding: 3.25rem 3.5rem; } }
  .form-title{
    font-weight:800; letter-spacing:.3px; margin-bottom:.25rem;
    background: linear-gradient(135deg,#e5e7eb 0%, #93c5fd 50%, #c4b5fd 100%);
    -webkit-background-clip:text; background-clip:text; color:transparent;
  }
  .form-sub{ color: rgba(226,232,240,.75); margin-bottom:1.25rem; }
  .form-card form p{ margin-bottom: 1rem; }
  .form-card form label{
    display:block; margin-bottom:.35rem; font-weight:600; font-size:.95rem;
    color: rgba(226,232,240,.9);
  }
  .form-card input[type="text"],
  .form-card input[type="email"],
  .form-card input[type="url"],
  .form-card textarea{
    width:100%; height:46px;
    color:#e5e7eb;
    background: rgba(255,255,255,.06);
    border: 1px solid rgba(148,163,184,.22);
    border-radius: .75rem;
    padding: .6rem .9rem;
    transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
  }
  .form-card textarea{ height:auto; min-height: 90px; resize: vertical; }
  .form-card input:focus,
  .form-card textarea:focus{
    outline:0; background: rgba(255,255,255,.08);
    border-color: rgba(59,130,246,.6);
    box-shadow: 0 0 0 .25rem rgba(59,130,246,.25);
  }
  .dz{ position:relative; border-radius:.9rem; }
  .dz input[type="file"]{
    position:absolute; inset:0; opacity:0; cursor:pointer; z-index:2;
  }
  .dz-ui{
    pointer-events:none;
    display:flex; flex-direction:column; gap:.35rem;
    justify-content:center; align-items:flex-start;
    min-height: 120px; padding: 1rem 1.1rem;
    border-radius:.9rem;
    background: rgba(255,255,255,.04);
    border: 1px dashed rgba(148,163,184,.35);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
  }
  .dz-ui b{ color:#e5e7eb; }
  .dz-note{ color: rgba(226,232,240,.65); font-size:.9rem; }
  .dz-filename{ color: rgba(226,232,240,.8); font-size:.9rem; }
  .form-card .errorlist{
    list-style:none; margin:.25rem 0 .75rem; padding:.5rem .75rem;
    border-radius:.5rem; background: rgba(239,68,68,.1);
    border:1px solid rgba(239,68,68,.35); color:#fecaca; font-size:.925rem;
  }
  .btn-neo{
    color:#0b1020; font-weight:700; letter-spacing:.2px;
    border:0; border-radius:.9rem; padding:.9rem 1rem;
    background: linear-gradient(135deg,#22d3ee 0%, #3b82f6 45%, #8b5cf6 100%);
    background-size:200% 200%;
    box-shadow: 0 10px 28px rgba(59,130,246,.35), inset 0 1px 0 rgba(255,255,255,.35);
    transition: transform .16s ease, filter .16s ease, box-shadow .16s ease, background-position .35s ease;
  }
  .btn-neo:hover{
    background-position:100% 0%; transform: translateY(-1px);
    filter: saturate(112%) contrast(104%);
    box-shadow: 0 16px 36px rgba(59,130,246,.45);
  }
</style>
{% endblock %}
{% block content %}
<div class="form-wrap">
  <div class="card card-ring form-card">
    <div class="card-body">
      <h1 class="form-title">Create a team</h1>
      <p class="form-sub">Choose a name, tag, and upload a logo</p>
      <form method="post" enctype="multipart/form-data" novalidate>
        {% csrf_token %}
        <p>
          {{ form.name.label_tag }}
          {{ form.name }}
          {% if form.name.errors %}<ul class="errorlist">{{ form.name.errors }}</ul>{% endif %}
        </p>
        <p>
          {{ form.tag.label_tag }}
          {{ form.tag }}
          {% if form.tag.errors %}<ul class="errorlist">{{ form.tag.errors }}</ul>{% endif %}
        </p>
        <p>
          {{ form.logo.label_tag }}
          <div class="dz">
            {{ form.logo }}
            <div class="dz-ui">
              <b>Drag and drop here or choose a file</b>
              <span class="dz-note">PNG/JPG, up to ~10MB. A square image is best.</span>
              <span class="dz-filename" id="dz-filename">No file selected</span>
            </div>
          </div>
          {% if form.logo.errors %}<ul class="errorlist">{{ form.logo.errors }}</ul>{% endif %}
        </p>
        <div class="d-grid mt-3">
          <button class="btn-neo" type="submit">Create</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  (function(){
    const input = document.querySelector('.dz input[type="file"]');
    const out = document.getElementById('dz-filename');
    if(input && out){
      input.addEventListener('change', () => {
        const f = input.files && input.files[0];
        out.textContent = f ? f.name : 'No file selected';
      });
    }
  })();
</script>
{% endblock %}
