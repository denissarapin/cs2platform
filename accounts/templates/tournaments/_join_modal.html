{# templates/tournaments/_join_modal.html #}

<div class="modal fade modal-glass" id="joinTournamentModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content card-dark card-ring">

      <div class="modal-header border-0 pb-0">
        <h5 class="modal-title fw-extrabold">Выберите команду</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body pt-3">
        {% if captain_teams %}
          <p class="text-muted mb-3">
            Вы — капитан следующих команд. Выберите, от какой команды хотите участвовать.
          </p>

          <div class="list-group list-group-flush">
            {% for tm in captain_teams %}
              <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between"
                 href="{% url 'tournaments:register_team' tournament.pk tm.pk %}">
                <div class="d-flex align-items-center gap-2">
                  {% if tm.logo %}
                    <img src="{{ tm.logo.url }}" alt="" width="28" height="28"
                         class="rounded" style="object-fit:cover;">
                  {% else %}
                    <span class="d-inline-flex align-items-center justify-content-center rounded"
                          style="width:28px;height:28px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);font-weight:800;">
                      {{ tm.tag|default:tm.name|first|upper }}
                    </span>
                  {% endif %}
                  <span class="fw-semibold">[{{ tm.tag }}] {{ tm.name }}</span>
                </div>
                <i class="bi bi-arrow-right-short fs-5 opacity-75"></i>
              </a>
            {% endfor %}
          </div>
        {% else %}
          <div class="alert alert-dark border rounded-3 mb-0">
            У вас нет команд, где вы капитан. Создайте команду и вернитесь к регистрации.
          </div>
        {% endif %}
      </div>

      <div class="modal-footer border-0 pt-0">
        <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Закрыть</button>
      </div>

    </div>
  </div>
</div>
